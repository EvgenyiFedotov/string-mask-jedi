(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{305:function(module,exports,__webpack_require__){__webpack_require__(306),__webpack_require__(485),module.exports=__webpack_require__(486)},381:function(module,exports){},486:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){var _storybook_react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(189);__webpack_require__(670);Object(_storybook_react__WEBPACK_IMPORTED_MODULE_0__.addParameters)({options:{}}),Object(_storybook_react__WEBPACK_IMPORTED_MODULE_0__.configure)(__webpack_require__(688),module)}.call(this,__webpack_require__(487)(module))},688:function(module,exports,__webpack_require__){var map={"./date.stories.tsx":689,"./phone.stories.tsx":692,"./time.stories.tsx":693};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=688},689:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"init",(function(){return init}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),_src_react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(76),_src__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(75),addSourceDecorator=(__webpack_require__(74).withSource,__webpack_require__(74).addSource);__webpack_exports__.default={parameters:{storySource:{source:'import React from "react";\nimport { useMask } from "../src/react";\nimport { createMask, Token, GetMatch, Converter } from "../src";\n\nexport default {\n  title: "Date",\n};\n\nconst numToStr = (value: number): string => {\n  return value < 10 ? `0${value}` : `${value}`;\n};\n\nconst tokensToValue = (tokens: Token[]) => {\n  return parseInt(tokens.map((token) => token.value).join(""));\n};\n\nconst date1: GetMatch = (state) => {\n  const { tokens } = state;\n  const prevToken = tokens[tokens.length - 1];\n\n  if (prevToken.value.match(/3/)) {\n    return /[01]/;\n  }\n\n  if (prevToken.value.match(/0/)) {\n    return /[123456789]/;\n  }\n\n  return /\\d/;\n};\n\nconst month1: GetMatch = (state) => {\n  const { tokens } = state;\n  const prevToken = tokens[tokens.length - 1];\n\n  if (prevToken.value.match(/1/)) {\n    return /[012]/;\n  }\n\n  if (prevToken.value.match(/0/)) {\n    return /[123456789]/;\n  }\n};\n\nconst converter: Converter = (tokens, configTokens) => {\n  if (tokens.length === configTokens.length) {\n    const day = tokensToValue([tokens[0], tokens[1]]);\n    const month = tokensToValue([tokens[3], tokens[4]]);\n    const year = tokensToValue([tokens[6], tokens[7], tokens[8], tokens[9]]);\n    const date = new Date(year, month - 1, day);\n    const dayArr = numToStr(date.getDate()).split("");\n    const monthArr = numToStr(date.getMonth() + 1).split("");\n    const yearArr = numToStr(date.getFullYear()).split("");\n\n    tokens[0].value = dayArr[0];\n    tokens[1].value = dayArr[1];\n    tokens[3].value = monthArr[0];\n    tokens[4].value = monthArr[1];\n    tokens[6].value = yearArr[0];\n    tokens[7].value = yearArr[1];\n    tokens[8].value = yearArr[2];\n    tokens[9].value = yearArr[3];\n  }\n};\n\nconst mask = createMask(\n  "d/m/y",\n  {\n    d: [/[0123]/, date1],\n    m: [/[01]/, month1],\n    y: [/\\d/, /\\d/, /\\d/, /\\d/],\n  },\n  { converters: [converter] },\n);\n\nexport const init = () => {\n  const { value, onChange, ref } = useMask(mask);\n\n  return <input value={value} onChange={onChange} ref={ref} />;\n};\n',locationsMap:{"date--init":{startLoc:{col:20,line:76},endLoc:{col:1,line:80},startBody:{col:20,line:76},endBody:{col:1,line:80}}}}},title:"Date"};var numToStr=function numToStr(value){return value<10?"0".concat(value):"".concat(value)},tokensToValue=function tokensToValue(tokens){return parseInt(tokens.map((function(token){return token.value})).join(""))},mask=Object(_src__WEBPACK_IMPORTED_MODULE_2__.a)("d/m/y",{d:[/[0123]/,function date1(state){var tokens=state.tokens,prevToken=tokens[tokens.length-1];return prevToken.value.match(/3/)?/[01]/:prevToken.value.match(/0/)?/[123456789]/:/\d/}],m:[/[01]/,function month1(state){var tokens=state.tokens,prevToken=tokens[tokens.length-1];return prevToken.value.match(/1/)?/[012]/:prevToken.value.match(/0/)?/[123456789]/:void 0}],y:[/\d/,/\d/,/\d/,/\d/]},{converters:[function converter(tokens,configTokens){if(tokens.length===configTokens.length){var day=tokensToValue([tokens[0],tokens[1]]),month=tokensToValue([tokens[3],tokens[4]]),year=tokensToValue([tokens[6],tokens[7],tokens[8],tokens[9]]),date=new Date(year,month-1,day),dayArr=numToStr(date.getDate()).split(""),monthArr=numToStr(date.getMonth()+1).split(""),yearArr=numToStr(date.getFullYear()).split("");tokens[0].value=dayArr[0],tokens[1].value=dayArr[1],tokens[3].value=monthArr[0],tokens[4].value=monthArr[1],tokens[6].value=yearArr[0],tokens[7].value=yearArr[1],tokens[8].value=yearArr[2],tokens[9].value=yearArr[3]}}]}),init=addSourceDecorator((function(){var _useMask=Object(_src_react__WEBPACK_IMPORTED_MODULE_1__.a)(mask),value=_useMask.value,onChange=_useMask.onChange,ref=_useMask.ref;return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input",{value:value,onChange:onChange,ref:ref})}),{__STORY__:'import React from "react";\nimport { useMask } from "../src/react";\nimport { createMask, Token, GetMatch, Converter } from "../src";\n\nexport default {\n  title: "Date",\n};\n\nconst numToStr = (value: number): string => {\n  return value < 10 ? `0${value}` : `${value}`;\n};\n\nconst tokensToValue = (tokens: Token[]) => {\n  return parseInt(tokens.map((token) => token.value).join(""));\n};\n\nconst date1: GetMatch = (state) => {\n  const { tokens } = state;\n  const prevToken = tokens[tokens.length - 1];\n\n  if (prevToken.value.match(/3/)) {\n    return /[01]/;\n  }\n\n  if (prevToken.value.match(/0/)) {\n    return /[123456789]/;\n  }\n\n  return /\\d/;\n};\n\nconst month1: GetMatch = (state) => {\n  const { tokens } = state;\n  const prevToken = tokens[tokens.length - 1];\n\n  if (prevToken.value.match(/1/)) {\n    return /[012]/;\n  }\n\n  if (prevToken.value.match(/0/)) {\n    return /[123456789]/;\n  }\n};\n\nconst converter: Converter = (tokens, configTokens) => {\n  if (tokens.length === configTokens.length) {\n    const day = tokensToValue([tokens[0], tokens[1]]);\n    const month = tokensToValue([tokens[3], tokens[4]]);\n    const year = tokensToValue([tokens[6], tokens[7], tokens[8], tokens[9]]);\n    const date = new Date(year, month - 1, day);\n    const dayArr = numToStr(date.getDate()).split("");\n    const monthArr = numToStr(date.getMonth() + 1).split("");\n    const yearArr = numToStr(date.getFullYear()).split("");\n\n    tokens[0].value = dayArr[0];\n    tokens[1].value = dayArr[1];\n    tokens[3].value = monthArr[0];\n    tokens[4].value = monthArr[1];\n    tokens[6].value = yearArr[0];\n    tokens[7].value = yearArr[1];\n    tokens[8].value = yearArr[2];\n    tokens[9].value = yearArr[3];\n  }\n};\n\nconst mask = createMask(\n  "d/m/y",\n  {\n    d: [/[0123]/, date1],\n    m: [/[01]/, month1],\n    y: [/\\d/, /\\d/, /\\d/, /\\d/],\n  },\n  { converters: [converter] },\n);\n\nexport const init = () => {\n  const { value, onChange, ref } = useMask(mask);\n\n  return <input value={value} onChange={onChange} ref={ref} />;\n};\n',__ADDS_MAP__:{"date--init":{startLoc:{col:20,line:76},endLoc:{col:1,line:80},startBody:{col:20,line:76},endBody:{col:1,line:80}}},__MAIN_FILE_LOCATION__:"/date.stories.tsx",__MODULE_DEPENDENCIES__:[],__LOCAL_DEPENDENCIES__:{},__SOURCE_PREFIX__:"/Users/evgenijfedotov/TestProjects/string-mask-jedi/stories",__IDS_TO_FRAMEWORKS__:{}})},692:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"init",(function(){return init}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),_src_react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(76),_src__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(75),addSourceDecorator=(__webpack_require__(74).withSource,__webpack_require__(74).addSource);__webpack_exports__.default={parameters:{storySource:{source:'import React from "react";\nimport { useMask } from "../src/react";\nimport { createMask } from "../src";\n\nexport default {\n  title: "Phone",\n};\n\nconst mask = createMask("+0 (ddd) ddd-dd-dd", {\n  d: /\\d/,\n});\n\nexport const init = () => {\n  const { value, onChange, ref } = useMask(mask);\n\n  return <input value={value} onChange={onChange} ref={ref} />;\n};\n',locationsMap:{"phone--init":{startLoc:{col:20,line:13},endLoc:{col:1,line:17},startBody:{col:20,line:13},endBody:{col:1,line:17}}}}},title:"Phone"};var mask=Object(_src__WEBPACK_IMPORTED_MODULE_2__.a)("+0 (ddd) ddd-dd-dd",{d:/\d/}),init=addSourceDecorator((function(){var _useMask=Object(_src_react__WEBPACK_IMPORTED_MODULE_1__.a)(mask),value=_useMask.value,onChange=_useMask.onChange,ref=_useMask.ref;return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input",{value:value,onChange:onChange,ref:ref})}),{__STORY__:'import React from "react";\nimport { useMask } from "../src/react";\nimport { createMask } from "../src";\n\nexport default {\n  title: "Phone",\n};\n\nconst mask = createMask("+0 (ddd) ddd-dd-dd", {\n  d: /\\d/,\n});\n\nexport const init = () => {\n  const { value, onChange, ref } = useMask(mask);\n\n  return <input value={value} onChange={onChange} ref={ref} />;\n};\n',__ADDS_MAP__:{"phone--init":{startLoc:{col:20,line:13},endLoc:{col:1,line:17},startBody:{col:20,line:13},endBody:{col:1,line:17}}},__MAIN_FILE_LOCATION__:"/phone.stories.tsx",__MODULE_DEPENDENCIES__:[],__LOCAL_DEPENDENCIES__:{},__SOURCE_PREFIX__:"/Users/evgenijfedotov/TestProjects/string-mask-jedi/stories",__IDS_TO_FRAMEWORKS__:{}})},693:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"init",(function(){return init}));var _Users_evgenijfedotov_TestProjects_string_mask_jedi_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(134),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__),_src_react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(76),_src__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(75),addSourceDecorator=(__webpack_require__(74).withSource,__webpack_require__(74).addSource);__webpack_exports__.default={parameters:{storySource:{source:'import React from "react";\nimport { useMask } from "../src/react";\nimport { createMask } from "../src";\n\nexport default {\n  title: "Time",\n};\n\nconst mask = createMask("Hh:M", {\n  H: /[012]/,\n  h: ({ tokens: [h1] }) => (h1.value.match(/([01])/) ? /(\\d)/ : /([0123])/),\n  M: [/([012345])/, /\\d/],\n});\n\nexport const init = () => {\n  const { value, onChange, ref } = useMask(mask);\n\n  return <input value={value} onChange={onChange} ref={ref} />;\n};\n',locationsMap:{"time--init":{startLoc:{col:20,line:15},endLoc:{col:1,line:19},startBody:{col:20,line:15},endBody:{col:1,line:19}}}}},title:"Time"};var mask=Object(_src__WEBPACK_IMPORTED_MODULE_3__.a)("Hh:M",{H:/[012]/,h:function h(_ref){return Object(_Users_evgenijfedotov_TestProjects_string_mask_jedi_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.a)(_ref.tokens,1)[0].value.match(/([01])/)?/(\d)/:/([0123])/},M:[/([012345])/,/\d/]}),init=addSourceDecorator((function(){var _useMask=Object(_src_react__WEBPACK_IMPORTED_MODULE_2__.a)(mask),value=_useMask.value,onChange=_useMask.onChange,ref=_useMask.ref;return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("input",{value:value,onChange:onChange,ref:ref})}),{__STORY__:'import React from "react";\nimport { useMask } from "../src/react";\nimport { createMask } from "../src";\n\nexport default {\n  title: "Time",\n};\n\nconst mask = createMask("Hh:M", {\n  H: /[012]/,\n  h: ({ tokens: [h1] }) => (h1.value.match(/([01])/) ? /(\\d)/ : /([0123])/),\n  M: [/([012345])/, /\\d/],\n});\n\nexport const init = () => {\n  const { value, onChange, ref } = useMask(mask);\n\n  return <input value={value} onChange={onChange} ref={ref} />;\n};\n',__ADDS_MAP__:{"time--init":{startLoc:{col:20,line:15},endLoc:{col:1,line:19},startBody:{col:20,line:15},endBody:{col:1,line:19}}},__MAIN_FILE_LOCATION__:"/time.stories.tsx",__MODULE_DEPENDENCIES__:[],__LOCAL_DEPENDENCIES__:{},__SOURCE_PREFIX__:"/Users/evgenijfedotov/TestProjects/string-mask-jedi/stories",__IDS_TO_FRAMEWORKS__:{}})},75:function(module,__webpack_exports__,__webpack_require__){"use strict";var toConsumableArray=__webpack_require__(46),objectSpread2=__webpack_require__(35),create_config_parseTranlation=function parseTranlation(translation,config){if(translation instanceof RegExp)return[Object(objectSpread2.a)({getMatch:function getMatch(){return translation},defaultValue:"",additional:!1},config)];if(translation instanceof Function)return[Object(objectSpread2.a)({getMatch:translation,defaultValue:"",additional:!1},config)];if("string"==typeof translation){var reg=new RegExp(translation.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"));return[Object(objectSpread2.a)({getMatch:function getMatch(){return reg},defaultValue:translation,additional:!0},config)]}return create_mask_isMask(translation)?Object(toConsumableArray.a)(translation.config.tokens):[Object(objectSpread2.a)({},config,{},translation)]},create_config_createConfig=function createConfig(value){for(var translations=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},options=arguments.length>2?arguments[2]:void 0,config=Object(objectSpread2.a)({tokens:[],converters:[]},options),tokens=value.split(""),addTranslation=function addTranslation(translation){var parseTranlationResult=create_config_parseTranlation(translation);if(create_mask_isMask(translation)){var left=config.tokens.length,right=left+parseTranlationResult.length,translationConverters=translation.config.converters.map((function(converter){return function(tokens,configTokens){return converter(tokens.slice(left,right),configTokens.slice(left,right))}}));config.converters=[].concat(Object(toConsumableArray.a)(config.converters),Object(toConsumableArray.a)(translationConverters))}config.tokens=[].concat(Object(toConsumableArray.a)(config.tokens),Object(toConsumableArray.a)(parseTranlationResult))},index=0;index<tokens.length;index+=1){var token=tokens[index],_translation=translations[token];_translation?_translation instanceof Array?_translation.forEach((function(subTranslation){addTranslation(subTranslation)})):addTranslation(_translation):addTranslation(token)}return config},create_mask_isMask=function isMask(x){return x.run instanceof Function&&function isConfig(x){return x.tokens instanceof Array&&x.converters instanceof Array}(x.config)},create_mask_createMask=function createMask(stringMask){var translations=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},options=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},config=create_config_createConfig(stringMask,translations,options),run=function run(value){for(var cursor=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,state=buildDefaultState(value,cursor),_index=0;_index<config.tokens.length;_index+=1){Object.freeze(state),Object.freeze(state.tokens);var nextState=create_mask_buildNextState({config:config.tokens[_index],state:state,index:_index});if(!nextState||nextState===state)break;state=nextState,config.converters.length&&(Object.freeze(state),Object.freeze(state.tokens),config.converters.forEach((function(converter){converter(state.tokens,config.tokens)})))}return create_mask_buildMaskResult(state,config)};return{run:run,config:config}},buildDefaultState=function buildDefaultState(value,cursor){return{remainder:"".concat(value.slice(0,cursor),"#cursor#").concat(value.slice(cursor)),tokens:[],cursor:0}},create_mask_buildNextState=function buildNextState(params){var config=params.config,state=params.state,index=params.index,getMatch=config.getMatch,_config$defaultValue=config.defaultValue,defaultValue=void 0===_config$defaultValue?"":_config$defaultValue,_config$additional=config.additional,additional=void 0!==_config$additional&&_config$additional,match=getMatch(state,index),matchResult=filterCursor(state.remainder).match(match);if(defaultValue||matchResult){var nextState=Object(objectSpread2.a)({},state,{tokens:Object(toConsumableArray.a)(state.tokens)}),setToken=function setToken(value){nextState.tokens[index]={value:value,additional:additional}};return nextState=create_mask_setCursorToState(nextState,index),matchResult?(nextState.remainder=nextState.remainder.replace(match,""),additional?filterCursor(nextState.remainder)&&setToken(matchResult[0]):setToken(matchResult[0])):defaultValue&&additional&&filterCursor(nextState.remainder)&&setToken(defaultValue),nextState}return state},create_mask_buildMaskResult=function buildMaskResult(state,config){var nextState=Object(objectSpread2.a)({},state,{tokens:Object(toConsumableArray.a)(state.tokens)});if((nextState.remainder.match(/^#cursor#/)||nextState.remainder.match(/#cursor#$/))&&(nextState.cursor=nextState.tokens.length,nextState.remainder=nextState.remainder.replace(/^#cursor#/,""),nextState.remainder=nextState.remainder.replace(/#cursor#$/,"")),nextState.tokens.length&&nextState.tokens.length<config.tokens.length)for(var lastToken=nextState.tokens[nextState.tokens.length-1];lastToken&&lastToken.additional;)nextState.cursor===nextState.tokens.length&&(nextState.cursor-=1),nextState.tokens.splice(-1),lastToken=nextState.tokens[nextState.tokens.length-1];return{value:buildValue(nextState.tokens),cursor:nextState.cursor}},buildValue=function buildValue(tokens){return tokens.map((function(token){return token.value})).join("")},create_mask_setCursorToState=function setCursorToState(state,index){return state.remainder.match(/^#cursor#/)?Object(objectSpread2.a)({},state,{cursor:index,remainder:state.remainder.replace(/^#cursor#/,"")}):state},filterCursor=function filterCursor(value){return value.replace(/^#cursor#/,"")};__webpack_require__.d(__webpack_exports__,"a",(function(){return create_mask_createMask}))},76:function(module,__webpack_exports__,__webpack_require__){"use strict";var slicedToArray=__webpack_require__(134),react=__webpack_require__(0),use_mask_useMask=function useMask(mask){var ref=react.useRef(null),_React$useState=react.useState({value:"",cursor:0}),_React$useState2=Object(slicedToArray.a)(_React$useState,2),maskResult=_React$useState2[0],setMaskResult=_React$useState2[1],value=react.useMemo((function(){return maskResult.value}),[maskResult]),onChange=react.useCallback((function(event){var currentTarget=event.currentTarget,value=currentTarget.value,selectionStart=currentTarget.selectionStart;"number"==typeof selectionStart&&setMaskResult(mask.run(value,selectionStart))}),[mask]);return react.useEffect((function(){var current=ref.current;current&&function isHTMLInput(x){return"string"==typeof x.value}(current)&&(current.selectionStart=maskResult.cursor,current.selectionEnd=maskResult.cursor)}),[maskResult]),{value:value,onChange:onChange,ref:ref}};__webpack_require__.d(__webpack_exports__,"a",(function(){return use_mask_useMask}))}},[[305,1,2]]]);
//# sourceMappingURL=main.2f261c3a9a7ed3e0d9cd.bundle.js.map